#!/usr/bin/env ruby

# Class to make users
class User
  attr_reader :name

  attr_writer :marker
  
  def initialize(name)
    @name = name
  end

  def mark
    @marker
  end
end
turn = true

puts "Welcome to Tic-Tac-Toe\n\n"
puts ' X | X |   '
puts '---+---+---'
puts ' O | O | O '
puts '---+---+---'
puts '   | O | X '
answer = ''
cells = [1, 2, 3, 4, 5, 6, 7, 8, 9]
board = Board.new
until answer == 'yes'
  puts "\nWould you like to play a game of Tic-Tac-Toe?\n"
  answer = gets.chomp.downcase
end

puts "\nPlayerOne\nEnter name:"
player1 = User.new(gets.chomp.capitalize)

until player1.mark == 'x' || player1.mark == 'o'
  puts "\nChoose between x and o"
  player1.marker = gets.chomp.downcase
end

puts "\nPlayerOne\nYour name is #{player1.name}
and your marker is #{player1.mark}"
puts "\nPlayerTwo\nEnter name"
player2 = User.new(gets.chomp.capitalize)
player2.marker = player1.mark == 'x' ? 'o' : 'x'
puts "\nPlayerTwo\nYour name is #{player2.name}
and your marker is #{player2.mark}"
winning = false
board.display

until winning
  if board.valid && turn
    puts "#{player1.name} has won the game!!!"
   elsif board.valid
      puts "#{player2.name} has won the game!!!"
    

 elsif board.full
    puts "It's a draw!!!!"
    break

  elsif turn
    puts "\nIt is #{player1.name} turn"
    puts 'Enter a value between 1-9'
    inp = gets.chomp.to_i

    if board.valid(inp)
      board.update(inp,player1.mark)
      board.display
      turn = false

    else
      puts 'invalid input'
    end
  else
    puts "\nIt is #{player2.name} turn"
    puts 'Enter a value between 1-9'
    inp = gets.chomp.to_i

    if board.valid(inp)
      board.update(inp,player2.mark)
      board.display
      turn = true

    else
      puts 'invalid input'
    end

  end
end
